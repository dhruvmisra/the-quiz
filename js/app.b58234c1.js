(function(e){function t(t){for(var r,s,a=t[0],c=t[1],l=t[2],d=0,h=[];d<a.length;d++)s=a[d],o[s]&&h.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r,o,i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],c=(n("034f"),n("2877")),l={},u=Object(c["a"])(l,s,a,!1,null,null,null),d=u.exports,h=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[e.hasEnded?n("div",[e._v("\n    over\n  ")]):n("div",[e.secondplayer?e.secondplayer?n("div",{staticClass:"play"},[n("div",[n("div",{staticClass:"container hamilton--header--text"},[n("h1",[e._v("Do you know your Hamilton Lyrics?")]),n("p",[e._v(e._s(e.timeLeft))]),n("div",{staticClass:"columns hamilton--inner"},[n("div",{staticClass:"column is-half left"},[n("p",{staticClass:"title"},[e._v("User 1")]),n("p",{staticClass:"subtitle"},[e._v("Total Score: "+e._s(e.playerdata.one.score))])]),e.secondplayer?n("div",{staticClass:"column is-half right"},[n("p",{staticClass:"title"},[e._v("User 2")]),n("p",{staticClass:"subtitle"},[e._v("Total Score: "+e._s(e.playerdata.two.score))])]):e._e()]),n("div",{staticClass:"hamilton--lyrics--text"},[n("p",[e._v(e._s(e.question.lyric))]),n("div",{staticClass:"hamilton--answers"},e._l(e.options,function(t){return n("a",{key:t.text,class:{wronganswer:e.hasAnswered&&!t.correct,correctanswer:e.hasAnswered&&t.correct},on:{click:function(n){return e.checkAnswer(t)}}},[e._v(e._s(t.text))])}),0)])])])]):e._e():n("div",{staticClass:"home"},[n("div",{staticClass:"inner"},[n("h1",[e._v("Do you know your Hamilton Lyrics?")]),n("p",[e._v("Test your knowledge of Hamilton: An American Musical by guessing who sang what lyric.")]),n("p",[e._v("Invite a second player by sending them this link "+e._s(e.url)+".")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.idToConnect,expression:"idToConnect"}],attrs:{type:"text",placeholder:"Enter ID to connect"},domProps:{value:e.idToConnect},on:{input:function(t){t.target.composing||(e.idToConnect=t.target.value)}}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.connectToChannel(e.idToConnect)}}},[e._v("Connect to #"+e._s(e.idToConnect))])])])])])},p=[],v=(n("3b2b"),n("782e")),m=n.n(v),w=new m.a("a7fe0a77fb100e0402d7",{cluster:"ap2",encrypted:!0,authEndpoint:"https://the-quiz-task.herokuapp.com/pusher/auth"}),y={getPresenceID:function(){var e=function(e,t){var n=t||window.location.href,r=new RegExp("[?&]"+e+"=([^&#]*)","i"),o=r.exec(n);return o?o[1]:null},t=e("id");return t="presence-"+t,t},subscribeToPusher:function(e){e=e?"presence-"+e:this.getPresenceID(),console.log(e);var t=w.subscribe(e);return t}},b=y,g=Object(c["a"])(b,r,o,!1,null,null,null),x=g.exports,_=[{lyric:"When he was ten his father split, full of it, debt-ridden. Two years later, see Alex and his mother bed-ridden. Half-dead sittin' in their own sick, the scent thick",options:[{text:"Aaron Burr",correct:!1},{text:"James Madison",correct:!1},{text:"John Laurens",correct:!1},{text:"Eliza Hamilton",correct:!0}],answer:"Eliza Hamilton"},{lyric:"I am sailing off to London. I’m accompanied by someone who always pays. I have found a wealthy husband. Who will keep me in comfort for all my days. He is not a lot of fun, but there’s no one",options:[{text:"Eliza",correct:!1},{text:"Peggy",correct:!1},{text:"Angelica",correct:!0},{text:"Maria",correct:!1}],answer:"Angelica"}],C={name:"home",data:function(){return{presenceid:null,idToConnect:null,channel:null,hasEnded:!1,hasAnswered:!1,currentQuestionIndex:0,question:null,options:null,correctanswer:null,timeLeft:10,count:null,players:1,secondplayer:!1,playerdata:{one:{id:null,score:0,userid:null},two:{id:null,score:0,userid:null}},userid:null,url:null}},created:function(){this.currentQuestionIndex=0,this.hasEnded=!1,this.fetchData()},methods:{fetchData:function(){if(this.presenceid=this.getUniqueId(),!this.checkPresenceID()){var e=-1===window.location.href.indexOf("?")?"?":"&";window.location.href=window.location.href+e+this.presenceid}this.url=window.location.href,this.loadQuestion(this.currentQuestionIndex),this.connectToChannel(this.idToConnect)},connectToChannel:function(e){this.channel=x.subscribeToPusher(e),this.defineChannel()},defineChannel:function(){var e=this,t=this.channel;t.bind("pusher:member_added",function(t){console.log("members",t),e.players+=1,e.secondplayer=!0}),t.bind("pusher:subscription_succeeded",function(t){console.log("subscription_succeeded",t),1!==t.count||e.playerdata.one.id?2===t.count&&(e.secondplayer=!0,e.playerdata.two.id=t.myID,e.playerdata.two.userid=2,e.userid=2):(e.playerdata.one.id=t.myID,e.playerdata.one.userid=1,e.userid=1)}),t.bind("pusher:member_removed",function(t){console.log("member",t),e.players-=1,e.secondplayer=!1}),t.bind("client-send",function(t){console.log("data",t),1===e.userid?e.playerdata.two.score=t.data.two.score:2===e.userid&&(e.playerdata.one.score=t.data.one.score)}),t.bind("client-has-answered",function(e){})},getUniqueId:function(){return"id="+Math.floor(1e10*Math.random()+1e5)%5e5},checkPresenceID:function(){var e=function(e,t){var n=t||window.location.href,r=new RegExp("[?&]"+e+"=([^&#]*)","i"),o=r.exec(n);return o?o[1]:null},t=e("id");return t},checkAnswer:function(e){var t=this,n=this.channel;this.hasAnswered=!0,e.text===this.correctanswer&&(1===this.userid?this.playerdata.one.score+=this.timeLeft:2===this.userid&&(this.playerdata.two.score+=this.timeLeft)),n.trigger("client-send",{data:this.playerdata}),n.trigger("client-has-answered",{hasAnswered:!0}),this.count=3;var r=setInterval(function(){t.count-=1,0===t.count&&(clearInterval(r),t.currentQuestionIndex++,t.loadQuestion(t.currentQuestionIndex),t.startTimer())},1e3)},startTimer:function(){var e=this;this.channel;this.timeLeft=10;var t=setInterval(function(){e.timeLeft--,0==e.timeLeft&&(clearInterval(t),e.timeOut())},1e3)},timeOut:function(){var e=this,t=this.channel;this.hasAnswered=!0,t.trigger("client-has-answered",{hasAnswered:!0}),this.count=3;var n=setInterval(function(){e.count-=1,0===e.count&&(clearInterval(n),e.currentQuestionIndex++,e.loadQuestion(e.currentQuestionIndex),e.startTimer())},1e3)},loadQuestion:function(e){if(this.hasAnswered=!1,e==_.length)this.endQuiz();else{var t=_[e];this.question=t,this.options=t.options,this.correctanswer=t.answer}},endQuiz:function(){this.hasEnded=!0}},watch:{secondplayer:function(e){this.startTimer()}}},I=C,T=(n("7506"),Object(c["a"])(I,f,p,!1,null,"46735c30",null)),k=T.exports;i["a"].use(h["a"]);var A=new h["a"]({routes:[{path:"/",name:"home",component:k}]}),O=n("2f62");i["a"].use(O["a"]);var P=new O["a"].Store({state:{},mutations:{},actions:{}});i["a"].config.productionTip=!1,new i["a"]({router:A,store:P,render:function(e){return e(d)}}).$mount("#app")},"64a9":function(e,t,n){},7506:function(e,t,n){"use strict";var r=n("f27d"),o=n.n(r);o.a},f27d:function(e,t,n){}});
//# sourceMappingURL=app.b58234c1.js.map